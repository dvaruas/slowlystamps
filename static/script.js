(()=>{"use strict";const t=(t,e)=>t.replace(/{([0-9]+)}/g,(function(t,n){return void 0===e[n]?t:e[n]})),e=t=>{switch(t){case"-1":return"L0";case"1":return"L1";case"2":return"L2";default:return"L3"}},n=t=>{switch(t){case"-1":case"0":return"free";case"1":return"premium";case"2":return"pricey";default:return"unknown"}};class s{constructor(t,e,n,s,l,i,a,r,d){this.id=t,this.slug=e,this.name=n,this.type=s,this.rarity=l,this.price=i,this.description=a,this.country=r,this.staticAssetsPath=d,this.e=null}get element(){return null!=this.e||(this.e=document.createElement("div"),this.e.id=`sw-stamp-${this.id}`,this.e.classList.add("card","text-dark","sw-display-card"),this.e.innerHTML=t('\n<img class="card-img-top {0}" src="{1}" alt="{2}"> \n<div class="card-body text-center">\n    <span class="card-title {3}">{4}</span>\n</div>',["sw-card-img",t(this.staticAssetsPath,[this.slug]),this.slug,"sw-card-text",this.name]),this.e.setAttribute("data-bs-toggle","modal"),this.e.setAttribute("data-bs-target","#sw-modal")),this.e}get titleForModal(){return this.name}get bodyForModal(){return t('\n<div class="container">\n    <div class="row">\n        <div class="col-5 p-0">\n            <a href="{0}" target="_blank">\n              <img src="{1}">\n            </a>\n        </div>\n        <div class="col-7 p-0">\n            <p><b>Description: </b> {2}</p>\n            <span class="badge rounded-pill bg-primary">Type: {3}</span>\n            <span class="badge rounded-pill bg-warning text-dark">Rarity: {4}</span> \n            <span class="badge rounded-pill bg-info text-dark">Price: {5}</span> \n            <span class="badge rounded-pill bg-info text-dark">Country: {6}</span> \n        </div>\n    </div>\n</div>',[t("https://cdn.getslowly.com/assets/images/stamp/{0}.png",[this.slug]),t(this.staticAssetsPath,[this.slug]),this.description,this.type,e(this.rarity),n(this.price),(s=this.country,null===s?"NA":s)]);var s}static fromJson(t,e){let n=t.id;if(null==n)return null;let l=t.slug;if(null==l)return null;let i=t.name;if(null==i)return null;let a=t.type;if(null==a)return null;let r=t.rarity;if(null==r)return null;let d=t.price;if(null==d)return null;let c=t.desc;if(null==c)return null;let h=t.country;return new s(n,l,i,a,r,d,c,h,e)}}class l{constructor(t,e,n,s){let l=document.createElement("li");l.classList.add("page-item","sw-page-number"),l.innerHTML=`<a class="page-link">${t}</a>`,l.onclick=()=>{e.innerHTML="",n.forEach((t=>{e.appendChild(t.element)})),s(this)},this.element=l}set active(t){t?this.element.classList.add("active"):this.element.classList.remove("active")}}class i{constructor(t,e){this.slotElements=t,this.parentElement=e,this.prevMarkerElement=null,this.nextMarkerElement=null,this.currStartIndx=0,this.numberOfActualSlots=t.length,t.length>i.slidingWindowLength&&(this.prevMarkerElement=document.createElement("li"),this.prevMarkerElement.classList.add("page-item"),this.prevMarkerElement.innerHTML='\n      <a class="page-link" href="#" aria-label="Previous">\n        <span aria-hidden="true">&laquo;</span>\n      </a>\n    ',this.nextMarkerElement=document.createElement("li"),this.nextMarkerElement.classList.add("page-item"),this.nextMarkerElement.innerHTML='\n      <a class="page-link" href="#" aria-label="Next">\n        <span aria-hidden="true">&raquo;</span>\n      </a>\n    ',this.numberOfActualSlots=i.slidingWindowLength-2),this.updatePaginationState()}updatePaginationState(){this.parentElement.innerHTML="",null!=this.prevMarkerElement&&(this.parentElement.appendChild(this.prevMarkerElement),0==this.currStartIndx?(this.prevMarkerElement.classList.add("disabled"),this.prevMarkerElement.onclick=null):(this.prevMarkerElement.classList.remove("disabled"),this.prevMarkerElement.onclick=()=>{this.currStartIndx-=this.numberOfActualSlots,this.currStartIndx<0&&(this.currStartIndx=0),this.updatePaginationState()}));for(let t=0;t<this.numberOfActualSlots;t++)this.parentElement.appendChild(this.slotElements[this.currStartIndx+t]);null!=this.nextMarkerElement&&(this.parentElement.appendChild(this.nextMarkerElement),this.currStartIndx+this.numberOfActualSlots==this.slotElements.length?(this.nextMarkerElement.classList.add("disabled"),this.nextMarkerElement.onclick=null):(this.nextMarkerElement.classList.remove("disabled"),this.nextMarkerElement.onclick=()=>{this.currStartIndx+=this.numberOfActualSlots,this.currStartIndx+this.numberOfActualSlots-1>=this.slotElements.length&&(this.currStartIndx=this.slotElements.length-this.numberOfActualSlots),this.updatePaginationState()}))}}i.slidingWindowLength=7;class a{constructor(t,e,n,s){this.stampsCountElement=e,this.displayArea=n,this.displayElements=s,this.filters=new Map,this.navigationBlockElement=document.createElement("ul"),this.navigationBlockElement.classList.add("pagination"),t.appendChild(this.navigationBlockElement)}refresh(){let t=[...this.displayElements];for(let[e,n]of this.filters)t=t.filter(n.testValidity);let e=Math.ceil(t.length/a.displayElementsPerPage),n=[],s=t=>{n.forEach((t=>t.active=!1)),t.active=!0};for(let i=0;i<e;i++){let e=a.displayElementsPerPage*i,r=e+a.displayElementsPerPage;r>=t.length&&(r=t.length),n.push(new l(i+1,this.displayArea,t.slice(e,r),s))}let r=[];n.forEach((t=>r.push(t.element))),this.navigationBlockElement.innerHTML="",new i(r,this.navigationBlockElement),r[0].click(),this.stampsCountElement.innerHTML=`#${t.length}`}addFilter(t){this.filters.has(t.id)||this.filters.set(t.id,t)}removeFilter(t){this.filters.delete(t.id)}}a.displayElementsPerPage=100,document.addEventListener("DOMContentLoaded",(function(t){let e=document.getElementById("sw-container");if(null==e)return;let n=[],l=new Map,i=document.getElementById("sw-modal"),r=document.getElementById("sw-modal-title"),d=document.getElementById("sw-modal-body");null!=i&&null!=r&&null!=d&&i.addEventListener("show.bs.modal",(t=>{let e=t.relatedTarget,n=l.get(e.id);null!=n&&(r.innerHTML=n.titleForModal,d.innerHTML=n.bodyForModal)})),fetch("./static/assets/slowly.json",{headers:{"Content-Type":"application/json",Accept:"application/json"}}).then((t=>t.json())).then((t=>{t.items.forEach((t=>{let e=s.fromJson(t,"./static/assets/{0}.webp");null!=e&&(n.push(e),l.set(`sw-stamp-${e.id}`,e))})),n.sort(((t,e)=>e.id-t.id));let i=document.getElementById("sw-count");if(null==i)return;let r=document.getElementById("sw-navbar");null!=r&&new a(r,i,e,n).refresh()}))}))})();