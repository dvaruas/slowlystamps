(()=>{"use strict";class e{constructor(e){this.rarity=e}get id(){return this.rarity}testValidity(e){return e.rarity===this.rarity}}class t{constructor(e){this.price=e}get id(){return this.price}testValidity(e){return e.price===this.price}}class n{constructor(e){this.country=e}get id(){var e;return null!==(e=this.country)&&void 0!==e?e:"NA"}testValidity(e){return e.country===this.country}}const l=(e,t)=>e.replace(/{([0-9]+)}/g,(function(e,n){return void 0===t[n]?e:t[n]}));class s{constructor(e,t){this.title=e,this.e=t}static fromStampElement(i,r){let a=document.createElement("img");a.src=i.stampImagePath;let d=document.createElement("a");d.href=l("https://cdn.getslowly.com/assets/images/stamp/{0}.png",[i.slug]),d.target="_blank",d.appendChild(a);let c=document.createElement("div");c.classList.add("col-5","p-0"),c.appendChild(d);let h=document.createElement("p");h.innerHTML=`<b>Description: </b> ${i.description}`;let u=document.createElement("span");u.classList.add("badge","rounded-pill","bg-primary","mx-1"),u.innerHTML=`Type: ${i.type}`;let o=document.createElement("span");o.classList.add("badge","rounded-pill","bg-warning","text-dark","mx-1"),o.innerHTML=`Rarity: ${(e=>{switch(e){case"-1":return"L0";case"1":return"L1";case"2":return"L2";default:return"L3"}})(i.rarity)}`,o.onclick=()=>r.addFilter(new e(i.rarity));let m=document.createElement("span");m.classList.add("badge","rounded-pill","bg-info","text-dark","mx-1"),m.innerHTML=`Price: ${(e=>{switch(e){case"-1":case"0":return"free";case"1":return"premium";case"2":return"pricey";default:return"unknown"}})(i.price)}`,m.onclick=()=>r.addFilter(new t(i.price));let p=document.createElement("span");var g;p.classList.add("badge","rounded-pill","bg-info","text-dark","mx-1"),p.innerHTML=`Country: ${g=i.country,null===g?"NA":g}`,p.onclick=()=>r.addFilter(new n(i.country));let E=document.createElement("div");E.classList.add("col-7","p-0"),E.appendChild(h),E.appendChild(u),E.appendChild(o),E.appendChild(m),E.appendChild(p);let f=document.createElement("div");f.classList.add("row"),f.appendChild(c),f.appendChild(E);let y=document.createElement("div");return y.classList.add("container"),y.appendChild(f),new s(i.name,y)}get titleString(){return this.title}get bodyElement(){return this.e}}class i{constructor(e,t,n,l,s,i,r,a,d){this.id=e,this.slug=t,this.name=n,this.type=l,this.rarity=s,this.price=i,this.description=r,this.country=a,this.stampImagePath=d,this.e=null}get element(){return null!=this.e||(this.e=document.createElement("div"),this.e.id=`sw-stamp-${this.id}`,this.e.classList.add("card","text-dark","sw-display-card"),this.e.innerHTML=l('\n<img class="card-img-top {0}" src="{1}" alt="{2}"> \n<div class="card-body text-center">\n    <span class="card-title {3}">{4}</span>\n</div>',["sw-card-img",this.stampImagePath,this.slug,"sw-card-text",this.name]),this.e.setAttribute("data-bs-toggle","modal"),this.e.setAttribute("data-bs-target","#sw-modal")),this.e}static fromJson(e,t){let n=e.id;if(null==n)return null;let s=e.slug;if(null==s)return null;let r=e.name;if(null==r)return null;let a=e.type;if(null==a)return null;let d=e.rarity;if(null==d)return null;let c=e.price;if(null==c)return null;let h=e.desc;if(null==h)return null;let u=e.country;return new i(n,s,r,a,d,c,h,u,l(t,[s]))}}class r{constructor(e,t,n,l){let s=document.createElement("li");s.classList.add("page-item","sw-page-number"),s.innerHTML=`<a class="page-link">${e}</a>`,s.onclick=()=>{t.innerHTML="",n.forEach((e=>{t.appendChild(e.element)})),l(this)},this.element=s}set active(e){e?this.element.classList.add("active"):this.element.classList.remove("active")}}class a{constructor(e,t){this.slotElements=e,this.parentElement=t,this.prevMarkerElement=null,this.nextMarkerElement=null,this.currStartIndx=0,this.numberOfActualSlots=e.length,e.length>a.slidingWindowLength&&(this.prevMarkerElement=document.createElement("li"),this.prevMarkerElement.classList.add("page-item"),this.prevMarkerElement.innerHTML='\n      <a class="page-link" href="#" aria-label="Previous">\n        <span aria-hidden="true">&laquo;</span>\n      </a>\n    ',this.nextMarkerElement=document.createElement("li"),this.nextMarkerElement.classList.add("page-item"),this.nextMarkerElement.innerHTML='\n      <a class="page-link" href="#" aria-label="Next">\n        <span aria-hidden="true">&raquo;</span>\n      </a>\n    ',this.numberOfActualSlots=a.slidingWindowLength-2),this.updatePaginationState()}updatePaginationState(){this.parentElement.innerHTML="",null!=this.prevMarkerElement&&(this.parentElement.appendChild(this.prevMarkerElement),0==this.currStartIndx?(this.prevMarkerElement.classList.add("disabled"),this.prevMarkerElement.onclick=null):(this.prevMarkerElement.classList.remove("disabled"),this.prevMarkerElement.onclick=()=>{this.currStartIndx-=this.numberOfActualSlots,this.currStartIndx<0&&(this.currStartIndx=0),this.updatePaginationState()}));for(let e=0;e<this.numberOfActualSlots;e++)this.parentElement.appendChild(this.slotElements[this.currStartIndx+e]);null!=this.nextMarkerElement&&(this.parentElement.appendChild(this.nextMarkerElement),this.currStartIndx+this.numberOfActualSlots==this.slotElements.length?(this.nextMarkerElement.classList.add("disabled"),this.nextMarkerElement.onclick=null):(this.nextMarkerElement.classList.remove("disabled"),this.nextMarkerElement.onclick=()=>{this.currStartIndx+=this.numberOfActualSlots,this.currStartIndx+this.numberOfActualSlots-1>=this.slotElements.length&&(this.currStartIndx=this.slotElements.length-this.numberOfActualSlots),this.updatePaginationState()}))}}a.slidingWindowLength=7;class d{constructor(e,t,n,l){this.stampsCountElement=t,this.displayArea=n,this.displayElements=l,this.filters=new Map,this.navigationBlockElement=document.createElement("ul"),this.navigationBlockElement.classList.add("pagination"),e.appendChild(this.navigationBlockElement),this.refresh()}refresh(){let e=[...this.displayElements];for(let[t,n]of this.filters)e=e.filter(n.testValidity,n);let t=Math.ceil(e.length/d.displayElementsPerPage),n=[],l=e=>{n.forEach((e=>e.active=!1)),e.active=!0};for(let s=0;s<t;s++){let t=d.displayElementsPerPage*s,i=t+d.displayElementsPerPage;i>=e.length&&(i=e.length),n.push(new r(s+1,this.displayArea,e.slice(t,i),l))}this.stampsCountElement.innerHTML=`#${e.length}`;let s=[];n.forEach((e=>s.push(e.element))),this.navigationBlockElement.innerHTML="",new a(s,this.navigationBlockElement),s[0].click()}addFilter(e){this.filters.has(e.id)||(this.filters.set(e.id,e),this.refresh())}removeFilter(e){this.filters.delete(e.id)&&this.refresh()}}d.displayElementsPerPage=100,document.addEventListener("DOMContentLoaded",(function(e){let t,n=document.getElementById("sw-container");if(null==n)return;let l=[],r=new Map,a=document.getElementById("sw-modal"),c=document.getElementById("sw-modal-title"),h=document.getElementById("sw-modal-body");null!=a&&null!=c&&null!=h&&a.addEventListener("show.bs.modal",(e=>{let n=e.relatedTarget,l=r.get(n.id);if(null!=l){let e=s.fromStampElement(l,t);c.replaceChildren(e.titleString),h.replaceChildren(e.bodyElement)}})),fetch("./static/assets/slowly.json",{headers:{"Content-Type":"application/json",Accept:"application/json"}}).then((e=>e.json())).then((e=>{e.items.forEach((e=>{let t=i.fromJson(e,"./static/assets/{0}.webp");null!=t&&(l.push(t),r.set(`sw-stamp-${t.id}`,t))})),l.sort(((e,t)=>t.id-e.id));let s=document.getElementById("sw-count");if(null==s)return;let a=document.getElementById("sw-navbar");null!=a&&(t=new d(a,s,n,l))}))}))})();