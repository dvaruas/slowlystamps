(()=>{"use strict";class e{constructor(e){this.rarity=e}get id(){return this.rarity}testValidity(e){return e.rarity===this.rarity}}class t{constructor(e){this.price=e}get id(){return this.price}testValidity(e){return e.price===this.price}}class n{constructor(e){this.country=e}get id(){var e;return null!==(e=this.country)&&void 0!==e?e:"NA"}testValidity(e){return e.country===this.country}}const l=["castle-","time-machine"],i="sw-stamp-",s="sw-modal",r=(e,t)=>e.replace(/{([0-9]+)}/g,(function(e,n){return void 0===t[n]?e:t[n]}));class a{constructor(e,t){this.title=e,this.e=t}static fromStampElement(l,i){let s=document.createElement("img");s.src=l.stampImagePath;let d=document.createElement("a");d.href=r("https://cdn.getslowly.com/assets/images/stamp/{0}.png",[l.slug]),d.target="_blank",d.appendChild(s);let c=document.createElement("div");c.classList.add("col-5","p-0"),c.appendChild(d);let h=document.createElement("p");h.innerHTML=`<b>Description: </b> ${l.description}`;let u=document.createElement("span");u.classList.add("badge","rounded-pill","bg-primary","mx-1"),u.innerHTML=`Type: ${l.type}`;let o=document.createElement("span");o.classList.add("badge","rounded-pill","bg-warning","text-dark","mx-1"),o.innerHTML=`Rarity: ${(e=>{switch(e){case"-1":return"L0";case"1":return"L1";case"2":return"L2";default:return"L3"}})(l.rarity)}`,o.onclick=()=>i.addFilter(new e(l.rarity));let m=document.createElement("span");m.classList.add("badge","rounded-pill","bg-info","text-dark","mx-1"),m.innerHTML=`Price: ${(e=>{switch(e){case"-1":case"0":return"free";case"1":return"premium";case"2":return"pricey";default:return"unknown"}})(l.price)}`,m.onclick=()=>i.addFilter(new t(l.price));let p=document.createElement("span");var g;p.classList.add("badge","rounded-pill","bg-info","text-dark","mx-1"),p.innerHTML=`Country: ${g=l.country,null===g?"NA":g}`,p.onclick=()=>i.addFilter(new n(l.country));let E=document.createElement("div");E.classList.add("col-7","p-0"),E.appendChild(h),E.appendChild(u),E.appendChild(o),E.appendChild(m),E.appendChild(p);let f=document.createElement("div");f.classList.add("row"),f.appendChild(c),f.appendChild(E);let y=document.createElement("div");return y.classList.add("container"),y.appendChild(f),new a(l.name,y)}get titleString(){return this.title}get bodyElement(){return this.e}}class d{constructor(e,t,n,l,i,s,r,a,d){this.id=e,this.slug=t,this.name=n,this.type=l,this.rarity=i,this.price=s,this.description=r,this.country=a,this.stampImagePath=d,this.e=null}get element(){return null!=this.e||(this.e=document.createElement("div"),this.e.id=`${i}${this.id}`,this.e.classList.add("card","text-dark","sw-display-card"),this.e.innerHTML=r('\n<img class="card-img-top {0}" src="{1}" alt="{2}"> \n<div class="card-body text-center">\n    <span class="card-title {3}">{4}</span>\n</div>',["sw-card-img",this.stampImagePath,this.slug,"sw-card-text",this.name]),this.e.setAttribute("data-bs-toggle","modal"),this.e.setAttribute("data-bs-target",`#${s}`)),this.e}static fromJson(e,t){let n=e.id;if(null==n)return null;let i=e.slug;if(null==i)return null;if(l.includes(i))return null;let s=e.name;if(null==s)return null;let a=e.type;if(null==a)return null;let c=e.rarity;if(null==c)return null;let h=e.price;if(null==h)return null;let u=e.desc;if(null==u)return null;let o=e.country;return new d(n,i,s,a,c,h,u,o,r(t,[i]))}}class c{constructor(e,t,n,l){let i=document.createElement("li");i.classList.add("page-item","sw-page-number"),i.innerHTML=`<a class="page-link">${e}</a>`,i.onclick=()=>{t.innerHTML="",n.forEach((e=>{t.appendChild(e.element)})),l(this)},this.element=i}set active(e){e?this.element.classList.add("active"):this.element.classList.remove("active")}}class h{constructor(e,t){this.slotElements=e,this.parentElement=t,this.prevMarkerElement=null,this.nextMarkerElement=null,this.currStartIndx=0,this.numberOfActualSlots=e.length,e.length>h.slidingWindowLength&&(this.prevMarkerElement=document.createElement("li"),this.prevMarkerElement.classList.add("page-item"),this.prevMarkerElement.innerHTML='\n      <a class="page-link" href="#" aria-label="Previous">\n        <span aria-hidden="true">&laquo;</span>\n      </a>\n    ',this.nextMarkerElement=document.createElement("li"),this.nextMarkerElement.classList.add("page-item"),this.nextMarkerElement.innerHTML='\n      <a class="page-link" href="#" aria-label="Next">\n        <span aria-hidden="true">&raquo;</span>\n      </a>\n    ',this.numberOfActualSlots=h.slidingWindowLength-2),this.updatePaginationState()}updatePaginationState(){this.parentElement.innerHTML="",null!=this.prevMarkerElement&&(this.parentElement.appendChild(this.prevMarkerElement),0==this.currStartIndx?(this.prevMarkerElement.classList.add("disabled"),this.prevMarkerElement.onclick=null):(this.prevMarkerElement.classList.remove("disabled"),this.prevMarkerElement.onclick=()=>{this.currStartIndx-=this.numberOfActualSlots,this.currStartIndx<0&&(this.currStartIndx=0),this.updatePaginationState()}));for(let e=0;e<this.numberOfActualSlots;e++)this.parentElement.appendChild(this.slotElements[this.currStartIndx+e]);null!=this.nextMarkerElement&&(this.parentElement.appendChild(this.nextMarkerElement),this.currStartIndx+this.numberOfActualSlots==this.slotElements.length?(this.nextMarkerElement.classList.add("disabled"),this.nextMarkerElement.onclick=null):(this.nextMarkerElement.classList.remove("disabled"),this.nextMarkerElement.onclick=()=>{this.currStartIndx+=this.numberOfActualSlots,this.currStartIndx+this.numberOfActualSlots-1>=this.slotElements.length&&(this.currStartIndx=this.slotElements.length-this.numberOfActualSlots),this.updatePaginationState()}))}}h.slidingWindowLength=7;class u{constructor(e,t,n,l){this.stampsCountElement=t,this.displayArea=n,this.displayElements=l,this.filters=new Map,this.navigationBlockElement=document.createElement("ul"),this.navigationBlockElement.classList.add("pagination"),e.appendChild(this.navigationBlockElement),this.refresh()}refresh(){let e=[...this.displayElements];for(let[t,n]of this.filters)e=e.filter(n.testValidity,n);let t=Math.ceil(e.length/u.displayElementsPerPage),n=[],l=e=>{n.forEach((e=>e.active=!1)),e.active=!0};for(let i=0;i<t;i++){let t=u.displayElementsPerPage*i,s=t+u.displayElementsPerPage;s>=e.length&&(s=e.length),n.push(new c(i+1,this.displayArea,e.slice(t,s),l))}this.stampsCountElement.innerHTML=`#${e.length}`;let i=[];n.forEach((e=>i.push(e.element))),this.navigationBlockElement.innerHTML="",new h(i,this.navigationBlockElement),i[0].click()}addFilter(e){this.filters.has(e.id)||(this.filters.set(e.id,e),this.refresh())}removeFilter(e){this.filters.delete(e.id)&&this.refresh()}}u.displayElementsPerPage=100,document.addEventListener("DOMContentLoaded",(function(e){let t,n=document.getElementById("sw-container");if(null==n)return;let l=[],r=new Map,c=document.getElementById(s),h=document.getElementById("sw-modal-title"),o=document.getElementById("sw-modal-body");null!=c&&null!=h&&null!=o&&c.addEventListener("show.bs.modal",(e=>{let n=e.relatedTarget,l=r.get(n.id);if(null!=l){let e=a.fromStampElement(l,t);h.replaceChildren(e.titleString),o.replaceChildren(e.bodyElement)}})),fetch("./static/assets/slowly.json",{headers:{"Content-Type":"application/json",Accept:"application/json"}}).then((e=>e.json())).then((e=>{e.items.forEach((e=>{let t=d.fromJson(e,"./static/assets/{0}.webp");null!=t&&(l.push(t),r.set(`${i}${t.id}`,t))})),l.sort(((e,t)=>t.id-e.id));let s=document.getElementById("sw-count");if(null==s)return;let a=document.getElementById("sw-navbar");null!=a&&(t=new u(a,s,n,l))}))}))})();